<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚·ãƒ•ãƒˆå¸Œæœ›ã‚¤ãƒ³ãƒãƒ¼ãƒˆç¢ºèª</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    th { background-color: #f0f0f0; }
    .warning { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h2>{{ next_month }} ã®ã‚·ãƒ•ãƒˆå¸Œæœ›ã‚¤ãƒ³ãƒãƒ¼ãƒˆç¢ºèª</h2>

  {% if submitted_list %}
    <form method="POST" action="{{ url_for('admin.import_shift') }}">
      <input type="hidden" name="month" value="{{ next_month }}">

      <!-- ğŸ”½ å…¨é¸æŠãƒ»å…¨è§£é™¤ãƒœã‚¿ãƒ³ -->
      <div style="margin-bottom: 8px;">
        <button type="button" onclick="checkAll(true)">âœ”ï¸ å…¨é¸æŠ</button>
        <button type="button" onclick="checkAll(false)">âŒ å…¨è§£é™¤</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</th>
            <th>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</th>
            <th>åå‰</th>
            <th>æå‡ºæ—¥æ™‚</th>
            <th>ä»¶æ•°</th>
          </tr>
        </thead>
        <tbody>
          {% for group in submitted_list %}
            <tr>
              <td><input type="checkbox" name="accounts" value="{{ group.account }}" checked></td>
              <td>{{ group.account }}</td>
              <td>{{ group.name }}</td>
              <td>{{ group.submitted_at }}</td>
              <td>{{ group.count }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <br>
      <button type="submit">âœ… é¸æŠã—ãŸã‚¹ã‚¿ãƒƒãƒ•ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
    </form>
    <!-- ğŸ”½ ãƒã‚§ãƒƒã‚¯åˆ‡ã‚Šæ›¿ãˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
      function checkAll(state) {
        const checkboxes = document.querySelectorAll('input[name="accounts"]');
        checkboxes.forEach(cb => cb.checked = state);
      }
    </script>
  {% else %}
    <p class="warning">ç¿Œæœˆã®æå‡ºæ¸ˆã¿ã‚·ãƒ•ãƒˆå¸Œæœ›ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}

  <br>
  <hr>
  <h3>æœªæå‡ºã®ã‚¹ã‚¿ãƒƒãƒ•</h3>
  {% if not_submitted %}
    <table>
      <thead>
        <tr>
          <th>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</th>
          <th>åå‰</th>
        </tr>
      </thead>
      <tbody>
        {% for person in not_submitted %}
          <tr>
            <td>{{ person.account }}</td>
            <td>{{ person.name }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>å…¨å“¡ãŒæå‡ºæ¸ˆã¿ã§ã™ã€‚</p>
  {% endif %}

  <br>
  <a href="{{ url_for('admin.admin_home') }}">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
</body>
</html>
